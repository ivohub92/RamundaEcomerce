(this["webpackJsonpramunda-ecomerce"]=this["webpackJsonpramunda-ecomerce"]||[]).push([[0],{80:function(e,t,c){},81:function(e,t,c){},90:function(e,t,c){},91:function(e,t,c){},95:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(36),i=c.n(r),s=(c(80),c(81),c(38)),o=c(18),l=c(1),j=Object(n.createContext)([]),d=function(e){var t=e.children,c=Object(n.useState)([]),a=Object(o.a)(c,2),r=a[0],i=a[1],d=function(e){return void 0!==r.find((function(t){return t.item.id===e}))},m=r.length>0?r.reduce((function(e,t){return e+t.quantity}),0):0,b=function(e){i(r.filter((function(t){return t.item.id!==e})))};return Object(n.useEffect)((function(){console.log("cart",r)}),[r]),Object(l.jsx)(j.Provider,{value:{items:r,addItem:function(e,t){d(e.id)?i(r.map((function(c){return c.item.id===e.id&&(c.quantity=c.quantity+=t),c}))):i([].concat(Object(s.a)(r),[{item:e,quantity:t}]))},isInCart:d,removeItem:b,clear:function(){i([])},cartSize:m,removeItems:function(e,t){(function(e){return r.find((function(t){return t.item.id===e}))})(e).quantity>t?i(r.map((function(c){return c.item.id===e&&(c.quantity-=t),c}))):b(e)},totalCompra:function(){return r.reduce((function(e,t){return t.item.price*t.quantity+e}),0)}},children:t})},m=c(21),b=c(20),u=c(51);c(68);u.a.initializeApp({apiKey:"AIzaSyDg-yoPXClFM9PXAmJ0zfoOLU56_w3HJzs",authDomain:"ramunda-ecomerce.firebaseapp.com",projectId:"ramunda-ecomerce",storageBucket:"ramunda-ecomerce.appspot.com",messagingSenderId:"858090787729",appId:"1:858090787729:web:48daf1a21c4140e691c030",measurementId:"G-VDHRFZWZJP"});var x=function(){return u.a.firestore()},O=c(5),h=x(),p=(h.collection("categories"),h.collection("items"),function(e){return function(e){return h.collection("items").doc(e).get()}(e).then((function(t){if(t)return t;throw new Error("No '".concat(e,"' item results."))}))}),f=c(105),v=c(70);var g=function(e){var t=e.id,c=e.title,n=e.price,a=e.pictureURL;return Object(l.jsxs)(f.a,{style:{width:"18rem",height:"600px"},children:[Object(l.jsx)(f.a.Img,{variant:"top",src:a}),Object(l.jsxs)(f.a.Body,{children:[Object(l.jsx)(f.a.Title,{children:c}),Object(l.jsx)(f.a.Text,{children:"Detalle del producto"}),Object(l.jsxs)("p",{children:["$",n]}),Object(l.jsx)(m.b,{to:"/item/".concat(t),children:Object(l.jsx)(v.a,{variant:"primary",size:"lg",children:"Ver detalles"})})]})]})};c(89);function N(e,t){var c=e.id,n=e.price,a=e.title,r=e.pictureURL,i=e.category,s=e.stock;return Object(l.jsx)("div",{children:Object(l.jsx)(g,{id:c,title:a,price:n,pictureURL:r,category:i,stock:s},t)})}var y=function(e){var t=e.items;Object(n.useEffect)((function(){localStorage.setItem("items",JSON.stringify(t))}),[t]);var c=Object(b.f)().categoryId;return c?t.filter((function(e){return e.categoryName==c})).map((function(e){return N(e)})):t.map((function(e){return N(e)}))};var C=function(e){var t=Object(n.useState)([]),c=Object(o.a)(t,2),a=c[0],r=c[1];return Object(n.useEffect)((function(){x().collection("items").get().then((function(e){var t=function(e){return e.docs.map((function(e){return Object(O.a)({id:e.id},e.data())}))}(e);r(t)}))}),[]),Object(l.jsx)("div",{className:"fs-5  text-center d-flex m-auto justify-content-center flex-wrap ",children:Object(l.jsx)(y,{className:"",items:a})})},I=c(103),k=c(100),S=c(106),w=c(102),q=c(59);var z=function(){var e=Object(n.useContext)(j).cartSize;return 0===e||Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(q.a,{size:"1.5rem",color:"white",className:" position-relative"}),Object(l.jsx)("span",{className:"top-0 start-100 translate-middle badge rounded-pill bg-danger",children:e})]})},L=(c(90),c.p+"static/media/logo.cdc935ce.png");c(91);var T=function(){return Object(l.jsx)("img",{style:{width:"20%"},className:"link",src:L,alt:"mi logo"})},E=function(){return Object(l.jsx)("div",{children:Object(l.jsx)(I.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(l.jsxs)(k.a,{children:[Object(l.jsx)(S.a.Link,{className:"link",as:m.b,to:"/",children:Object(l.jsx)(T,{})}),Object(l.jsx)(I.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(l.jsx)(I.a.Collapse,{id:"responsive-navbar-nav",children:Object(l.jsxs)(S.a,{className:"me-auto mx-auto",children:[Object(l.jsxs)(w.a,{className:"margenNav",title:"Categorias",id:"collasible-nav-dropdown",children:[Object(l.jsx)(w.a.Item,{className:"margenNav",as:m.b,to:"/category/lenceria",children:"Lenceria"}),Object(l.jsx)(w.a.Divider,{}),Object(l.jsx)(w.a.Item,{className:"margenNav",as:m.b,to:"/category/vestidos",children:"Vestidos"})]}),Object(l.jsx)(S.a.Link,{href:"#",children:"Contactanos!"})]})}),Object(l.jsx)(m.b,{to:"/cart",children:Object(l.jsx)(z,{})})]})})})};var P=function(e){var t=e.stock,c=e.initial,a=e.onAdd,r=Object(n.useState)(c),i=Object(o.a)(r,2),s=i[0],j=i[1];return Object(l.jsxs)("div",{className:"d-flex flex-column ",children:[Object(l.jsxs)("div",{className:"d-inline-flex justify-content-center gap-5 py-4",children:[Object(l.jsx)("button",{className:"btn btn-primary ",onClick:function(){s>c&&j(s-1)},children:"-"}),Object(l.jsx)("p",{className:"fs-6",children:s}),Object(l.jsx)("button",{className:"btn btn-primary",onClick:function(){s<t&&j(s+1)},children:"+"})]}),Object(l.jsx)("button",{className:"btn btn-primary ",onClick:function(){return a(s)},children:"Agregar"})]})};var A=function(e){var t=e.item,c=Object(n.useState)(0),a=Object(o.a)(c,2),r=(a[0],a[1]),i=Object(n.useContext)(j).addItem;return Object(l.jsxs)(f.a,{className:"text-center m-auto",style:{width:"18rem"},children:[Object(l.jsx)(f.a.Img,{variant:"top",src:t.pictureURL}),Object(l.jsxs)(f.a.Body,{children:[Object(l.jsx)(f.a.Title,{children:t.title}),Object(l.jsx)(f.a.Text,{children:t.description}),Object(l.jsxs)("p",{children:["$",t.price]}),Object(l.jsx)(P,{stock:t.stock,initial:1,onAdd:function(e){r(e),i(t,e)}})]})]})};var D=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),c=t[0],a=t[1],r=Object(b.f)().itemId;return Object(n.useEffect)((function(){p(r).then((function(e){a(Object(O.a)({id:e.id},e.data()))}))}),[r]),Object(l.jsx)(A,{className:"",item:c})},R=c(12),B=c(104),J=function(){var e=Object(n.useContext)(j),t=e.items,c=e.totalCompra,a=Object(n.useState)({name:null,email:null,phone:null}),r=Object(o.a)(a,2),i=r[0],s=r[1],d=Object(n.useState)(!1),b=Object(o.a)(d,2),h=b[0],p=b[1],f=i.name,g=i.email,N=i.phone,y=!(f&&g&&N),C=function(e){s(Object(O.a)(Object(O.a)({},i),{},Object(R.a)({},e.target.name,e.target.value)))};return Object(l.jsx)(k.a,{children:Object(l.jsxs)(B.a,{style:{marginTop:30},children:[Object(l.jsxs)(B.a.Group,{className:"mb-3",controlId:"formBasicName",children:[Object(l.jsx)(B.a.Label,{children:"Nombre Completo"}),Object(l.jsx)(B.a.Control,{name:"name",type:"text",placeholder:"Nombre",onChange:C})]}),Object(l.jsxs)(B.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(l.jsx)(B.a.Label,{children:"E-mail"}),Object(l.jsx)(B.a.Control,{name:"email",type:"email",placeholder:"Ingres\xe1 tu correo",onChange:C})]}),Object(l.jsxs)(B.a.Group,{className:"mb-3",controlId:"formBasicPhone",children:[Object(l.jsx)(B.a.Label,{children:"Tel\xe9fono"}),Object(l.jsx)(B.a.Control,{name:"phone",type:"telephone",placeholder:"Tel\xe9fono",onChange:C})]}),h?Object(l.jsx)(m.b,{to:"/",children:Object(l.jsx)(v.a,{variant:"primary",children:"Realizar otro pedido"})}):Object(l.jsx)(v.a,{disabled:y,variant:"primary",onClick:function(){var e=x(),n=e.collection("orders"),a=e.batch(),r=t.map((function(e){var t=e.item,c=e.quantity;return{items:{id:t.id,title:t.title,price:t.price},quantity:c}})),i={buyer:{name:f,phone:N,email:g},items:r,date:u.a.firestore.Timestamp.fromDate(new Date),total:c()};n.add(i).then((function(c){console.log("Productos a Firebase",c),t.forEach((function(t){var c=t.item,n=t.quantity,r=e.collection("items").doc(c.id);a.update(r,{stock:c.stock-n})})),a.commit()})).catch((function(e){return console.log(e)})).finally(p(!0))},children:"Pedir!"})]})})},U=c(101),F=c(73),V=function(){var e=Object(n.useContext)(j),t=e.items,c=e.cartSize,a=e.clear,r=e.removeItems;return Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"container padding-bottom-3x mb-1",children:[Object(l.jsx)("div",{className:"table-responsive",children:Object(l.jsxs)("table",{className:"table",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Producto"}),Object(l.jsx)("th",{className:"text-center",children:"Cantidad"}),Object(l.jsx)("th",{className:"text-center",children:"Subtotal"}),Object(l.jsx)("th",{className:"text-center",children:Object(l.jsx)("a",{className:"btn btn-sm btn-outline-danger",onClick:function(){return a()},children:"Vaciar"})})]})}),Object(l.jsx)("tbody",{children:c>0?t.map((function(e,t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsxs)("div",{className:"product-item",children:[Object(l.jsx)("img",{src:e.item.pictureURL,width:"200vh"}),Object(l.jsx)("div",{className:"product-info",children:Object(l.jsx)("h4",{className:"product-title",children:e.item.title})})]})}),Object(l.jsx)("td",{className:"text-center",children:Object(l.jsx)("div",{className:"count-input",children:Object(l.jsx)("select",{className:"form-control",children:Object(l.jsx)("option",{children:e.quantity})})})}),Object(l.jsxs)("td",{className:"text-center text-lg text-medium",children:["$",e.item.price*e.quantity]}),Object(l.jsx)("td",{className:"text-center",children:Object(l.jsx)("a",{className:"remove-from-cart",href:"#","data-toggle":"tooltip",title:!0,"data-original-title":"Remove item",children:Object(l.jsx)(q.b,{onClick:function(){return r(e.item.id,1)},size:"",color:"red",className:""})})})]},t)})):Object(l.jsx)(m.b,{to:"/",style:{textDecoration:"none"},children:"No hay productos, volver a inicio"})})]})}),Object(l.jsx)(k.a,{children:Object(l.jsxs)(U.a,{children:[Object(l.jsx)(F.a,{children:Object(l.jsxs)("form",{className:"coupon-form",method:"post",children:[Object(l.jsx)("input",{className:"form-control form-control-sm",type:"text",placeholder:"C\xf3digo del Cup\xf3n",required:!0}),Object(l.jsxs)("button",{className:"btn btn-outline-primary btn-sm",children:[" ","Aplicar Cup\xf3n"," "]})]})}),Object(l.jsxs)(F.a,{children:["Total:"," ",Object(l.jsxs)("span",{className:"text-medium",children:["$",t.reduce((function(e,t){return t.item.price*t.quantity+e}),0)]})]})]})}),Object(l.jsx)(k.a,{children:Object(l.jsxs)(U.a,{children:[Object(l.jsxs)(m.b,{className:"btn btn-outline-secondary",to:"/",children:[Object(l.jsx)("i",{className:"icon-arrow-left"}),"\xa0Volver"]}),Object(l.jsx)(v.a,{className:"btn btn-primary",as:m.b,to:"/terminar-compra",children:"Finalizar compra"})]})})]})})},G=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Pagina no encontrada"}),Object(l.jsx)("h3",{children:"Click en el logo para volver al inicio"})]})},$=function(){return Object(l.jsxs)(m.a,{children:[Object(l.jsx)(E,{}),Object(l.jsxs)(b.c,{children:[Object(l.jsx)(b.a,{exact:!0,path:"/category/:categoryId",component:C}),Object(l.jsx)(b.a,{exact:!0,path:"/",component:C}),Object(l.jsx)(b.a,{exact:!0,path:"/item/:itemId",component:D}),Object(l.jsx)(b.a,{exact:!0,path:"/cart",component:V}),Object(l.jsx)(b.a,{path:"/terminar-compra",component:J}),Object(l.jsx)(b.a,{path:"*",component:G})]})]})};var H=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(d,{children:Object(l.jsx)($,{})})})};i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(H,{})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.c84a2509.chunk.js.map